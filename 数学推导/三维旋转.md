# ä¸‰ç»´æ—‹è½¬

è¡¨ç¤ºä¸‰ç»´ç©ºé—´ä¸­æ—‹è½¬çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œä½†æˆ‘ä»¬è¿™é‡Œå…³æ³¨çš„æ˜¯è½´è§’å¼ (Axis-angle) çš„æ—‹è½¬ã€‚

ä»¥ä¸‹æ‰€æœ‰çš„å†…å®¹éƒ½ä¾èµ–äºå³æ‰‹åæ ‡ç³»ï¼š

![image-20210107112237651](https://cdn.jsdelivr.net/gh/sheng962464/PicGo/img/image-20210107112237651.png)

## ä¸‰ç»´æ—‹è½¬

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª**ç»è¿‡åŸç‚¹**çš„æ—‹è½¬è½´$u =(ğ‘¥, ğ‘¦, ğ‘§)^ğ‘‡$ï¼Œæˆ‘ä»¬å¸Œæœ›å°†ä¸€ä¸ªå‘é‡$v$ï¼Œæ²¿ç€è¿™ä¸ªæ—‹è½¬è½´æ—‹è½¬$\theta$åº¦ï¼Œå˜æ¢åˆ°$v'$ï¼š

![image-20210107154038651](https://cdn.jsdelivr.net/gh/sheng962464/PicGo/img/image-20210107154038651.png)

- å¦‚æœæ—‹è½¬è½´ä¸ç»è¿‡åŸç‚¹æˆ‘ä»¬å¯ä»¥å…ˆå°†æ—‹è½¬è½´å¹³ç§»åˆ°åŸç‚¹ï¼Œè¿›è¡Œæ—‹è½¬ï¼Œå†å¹³ç§»å›åŸå¤„
- è¿™é‡Œçš„æ—‹è½¬è½´$u$æ˜¯**å•ä½å‘é‡**

### æ—‹è½¬çš„åˆ†è§£

å°†$v$åˆ†è§£ä¸ºå¹³è¡Œäºæ—‹è½¬è½´$u$ä»¥åŠå‚ç›´äºæ—‹è½¬è½´$u$çš„ä¸¤ä¸ªåˆ†é‡ï¼Œåˆ†åˆ«ä¸º$v_{||}$å’Œ$v_{\bot}$ï¼Œå³$v = v_{||} + v_{\bot}$

![image-20210107155110474](https://cdn.jsdelivr.net/gh/sheng962464/PicGo/img/image-20210107155110474.png)

åˆ™ä¸¤ä¸ªåˆ†é‡åˆ†åˆ«ç»•æ—‹è½¬è½´æ—‹è½¬åä¸º$v'_{||}$å’Œ$v'_{\bot}$ï¼Œä¸”$v' = v'_{||} + v'_{\bot}$

è€Œ$v_{||}$æ²¡æœ‰æ—‹è½¬ï¼Œå› æ­¤$v'_{||}=v_{||}$ï¼Œè€Œ $v_{||}' = cos(\theta)v_{\bot}+sin(\theta)(u \times v_{\bot})$

å› æ­¤å¯ä»¥å¾—åˆ°ä¸€èˆ¬çš„æ—‹è½¬å…¬å¼
$$
v' = cos(\theta)v+(1-cos(\theta))(u \cdot v)u + sin(\theta)(u \times v)
$$
### 3Dæ—‹è½¬å…¬å¼ï¼ˆå››å…ƒæ•°å‹ï¼‰

éœ€è¦ç”¨åˆ°å››å…ƒæ•°ä¹˜æ³•ã€‚
$$
v = [0,v], \quad 
q = [cos(\frac12\theta),sin(\frac12\theta)u] \\
v' = qvq^*=qvq^{-1}
$$

### 3Dæ—‹è½¬å…¬å¼ï¼ˆçŸ©é˜µå‹ï¼‰

$$
a = cos(\frac12\theta),\quad 
b=sin(\frac12\theta)u_x,\quad 
c=sin(\frac12\theta)u_y,\quad 
d=sin(\frac12\theta)u_z \quad 
\\
v' = 
\begin{bmatrix}
1-2c^2-2d^2 & 2bc-2ad & 2ac + 2bd \\
2bc + 2ad & 1-2b^2-2d^2 & 2cd-2ab \\
2bd-2ac & 2ad + 2cd & 1-2b^2-2c^2
\end{bmatrix}v
$$

å¯¹äºå¤§æ‰¹é‡çš„å˜æ¢ï¼Œä½¿ç”¨é¢„è®¡ç®—å¥½çš„çŸ©é˜µæ˜¯æ¯”å››å…ƒæ•°ä¹˜æ³•æ›´æœ‰æ•ˆç‡çš„

æˆ–è€…æ›´ä¸€èˆ¬çš„å½¢å¼ï¼š
$$
u=(x,y,z)ä¸ºå•ä½å‘é‡,\\
v' = 
\begin{bmatrix}
x^2+(1-x^2)cos(\theta) & xy(1-cos(\theta))-zsin(\theta) & xz(1-cos(\theta)+ysin(\theta)) \\
xy(1-cos(\theta))+zsin(\theta) & y^2+(1-y^2)cos(\theta) & yz(1-cos(\theta))-xsin(\theta) \\
xz(1-cos(\theta))-ysin(\theta) & yz(1-cos(\theta))+xsin(\theta) & z^2+(1-z^2)cos(\theta)

\end{bmatrix}
$$

### 3Dæ—‹è½¬å…¬å¼ï¼ˆæ¬§æ‹‰è§’å‹ï¼‰

ç»• $XYZ$ ä¸‰ä¸ªè½´æ—‹è½¬åˆ†åˆ«ç§°ä¸º rollï¼ˆæ¨ªæ»šï¼‰ï¼Œpitchï¼ˆä¿¯ä»°ï¼‰ï¼Œyawï¼ˆåèˆªï¼‰ã€‚æ¬§æ‹‰è§’æ—‹è½¬å¿…é¡»æ³¨æ„ä¸¤ç‚¹ï¼š

- **æ—‹è½¬é¡ºåº**ã€‚å¦‚å…ˆç»• $X$ è½´æ—‹è½¬å†ç»• $Y$ è½´æ—‹è½¬ä¸å…ˆç»• $Y$ è½´æ—‹è½¬å†ç»• $X$ è½´æ—‹è½¬æ‰€å¾—çš„å§¿æ€æ˜¯ä¸ä¸€æ ·çš„
- **å†…æ—‹ä¸å¤–æ—‹**ã€‚å†…æ—‹ä¸ºæ—‹è½¬è½´ï¼Œå¤–æ—‹ä¸ºå›ºå®šè½´ã€‚å†…æ—‹ä¸å¤–æ—‹çš„åŒºåˆ«åœ¨äºç¬¬äºŒä¸ªè½¬è§’ä¸ç¬¬ä¸‰ä¸ªè½¬è§’çš„æ˜¯æŒ‰ç…§è‡ªèº«çš„åæ ‡ç³»è¿˜æ˜¯ä¸–ç•Œçš„åæ ‡ç³»ã€‚

å› æ­¤å®šä¹‰æ¬§æ‹‰è§’æ—‹è½¬æ–¹å¼éœ€å®šä¹‰ä¸ºï¼šâ€œ $XYZ$ å†…æ—‹ â€ã€â€œ $XYZ$ å¤–æ—‹ â€ç­‰ï¼Œå¦å¤–éœ€è¦çš„å°±æ˜¯å„è½´çš„æ—‹è½¬è§’åº¦ã€‚
$$
R_x = 
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & cos(\alpha) & -sin(\alpha) & 0 \\
0 & sin(\alpha) & cos(\alpha) & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
è¡¨ç¤ºç»•Xè½´æ—‹è½¬ \theta è§’åº¦å¯¹åº”çš„æ—‹è½¬çŸ©é˜µ
$$

$$
R_y = 
\begin{bmatrix}
cos(\beta) & 0 & sin(\beta) & 0 \\
0 & 1 & 0 & 0 \\
-sin(\beta) & 0 & cos(\beta) & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
è¡¨ç¤ºç»•Yè½´æ—‹è½¬ \beta è§’åº¦å¯¹åº”çš„æ—‹è½¬çŸ©é˜µ
$$

$$
R_z = 
\begin{bmatrix}
cos(\gamma) & -sin(\gamma) & 0 & 0 \\
sin(\gamma) & cos(\gamma) & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
è¡¨ç¤ºç»•Zè½´æ—‹è½¬ \gamma è§’åº¦å¯¹åº”çš„æ—‹è½¬çŸ©é˜µ
$$

ç”±äºæ¬§æ‹‰è§’çš„æ—‹è½¬æ–¹å¼ç»„åˆè¾ƒå¤šï¼Œè¿™é‡ŒåªæåŠæœ€å¸¸ç”¨çš„ä¸€ç§â€œ $XYZ$ å†…æ—‹ â€ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ$XYZ$ å†…æ—‹ä¸$ZYX$ å¤–æ—‹çš„å§¿æ€æ˜¯ä¸€æ ·çš„ã€‚
$$
R = R_x * R_y * R_z
$$
ä¸åŒçš„æ—‹è½¬æ–¹å¼å¯ä»¥é€šè¿‡å¦‚ä¸‹ `Python` ä»£ç è®¡ç®—å…¬å¼å¾—åˆ°ã€‚

```python
import sympy as sym

c1, s1 = sym.symbols("c1,s1")   # ç»•Xè½´çš„æ—‹è½¬å¼§åº¦,c1=cos(x),s1=sin(x)
c2, s2 = sym.symbols("c2,s2")   # ç»•Yè½´çš„æ—‹è½¬å¼§åº¦,c2=cos(y),s1=sin(y)
c3, s3 = sym.symbols("c3,s3")   # ç»•Zè½´çš„æ—‹è½¬å¼§åº¦,c3=cos(z),s1=sin(z)
rx = sym.Matrix([[1, 0, 0], [0, c1, -s1], [0, s1, c1]])
ry = sym.Matrix([[c2, 0, s2], [0, 1, 0], [-s2, 0, c2]])
rz = sym.Matrix([[c3, -s3, 0], [s3, c3, 0], [0, 0, 1]])

print(ry * rz * rx)      # YZX-å†…æ—‹ æˆ– XZY-å¤–æ—‹
```

